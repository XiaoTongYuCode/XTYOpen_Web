"use strict";(self["webpackChunkwms_web"]=self["webpackChunkwms_web"]||[]).push([[176],{1176:function(e,t,s){s.r(t),s.d(t,{default:function(){return c}});var i=function(){var e=this,t=e._self._c;return t("div",[t("el-tabs",{staticStyle:{"min-height":"90vh"},attrs:{type:"border-card"},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[t("el-tab-pane",{attrs:{label:"我的云盘",name:"my"}},[0===e.FileList.length?t("el-empty"):e._e(),0!==e.FileList.length?t("div",{staticStyle:{height:"80vh","overflow-y":"auto"}},[t("div",{staticStyle:{display:"flex","justify-content":"start","align-items":"center","margin-left":"2.5vw","margin-top":"10px"}},[t("div",{staticStyle:{display:"flex"}},[e._v(" 已用空间： "),t("el-progress",{staticStyle:{width:"180px"},attrs:{percentage:e.sizeT,format:e.format,color:e.customColors,"stroke-width":20}})],1),t("div",{staticStyle:{color:"#9a9a9a"}},[e._v(" 您的云盘上限为 7GB ")])]),t("div",{staticStyle:{"margin-top":"10px",display:"flex","flex-wrap":"wrap"}},e._l(e.FileList,(function(s,i){return t("div",{key:i,staticStyle:{position:"relative",width:"180px","min-height":"180px","border-radius":"10px",margin:"1em 1em",padding:"0.5em","text-align":"center","box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)"}},[t("i",{staticClass:"el-icon-folder",staticStyle:{"font-size":"50px","margin-top":"5px"}}),t("div",{staticStyle:{"word-wrap":"break-word"}},[e._v(e._s(s.name))]),t("div",{staticStyle:{position:"absolute",left:"0",bottom:"10px",width:"100%",display:"flex","justify-content":"space-evenly"}},[t("a",{attrs:{href:s.file,download:s.name,target:"_blank"}},[t("el-button",{staticStyle:{"font-size":"25px","background-color":"transparent"},attrs:{slot:"reference",icon:"el-icon-download"},slot:"reference"})],1),t("button",{staticClass:"delButton",on:{click:function(t){return e.fileDel(s.file)}}},[t("svg",{staticClass:"svgIcon",attrs:{viewBox:"0 0 448 512"}},[t("path",{attrs:{d:"M135.2 17.7L128 32H32C14.3 32 0 46.3 0 64S14.3 96 32 96H416c17.7 0 32-14.3 32-32s-14.3-32-32-32H320l-7.2-14.3C307.4 6.8 296.3 0 284.2 0H163.8c-12.1 0-23.2 6.8-28.6 17.7zM416 128H32L53.2 467c1.6 25.3 22.6 45 47.9 45H346.9c25.3 0 46.3-19.7 47.9-45L416 128z"}})])])])])})),0)]):e._e(),t("el-divider",[t("i",{staticClass:"el-icon-upload2"}),e._v(" 上 传 文 件")]),t("div",{staticClass:"upBox"},[t("el-upload",{attrs:{action:`${this.postUrl}/files/up/${this.user.id}`,"on-change":e.handleChange,multiple:"",drag:""}},[t("i",{staticClass:"el-icon-upload"}),t("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),t("em",[e._v("点击上传")])])])],1)],1),t("el-tab-pane",{attrs:{label:"公共资料夹",name:"public"}},[0===e.publicFile.length?t("el-empty"):e._e(),0!==e.publicFile.length?t("div",{staticStyle:{height:"80vh","overflow-y":"auto"}},[t("div",{staticStyle:{"margin-top":"10px",display:"flex","flex-wrap":"wrap"}},e._l(e.publicFile,(function(s,i){return t("div",{key:i,staticStyle:{position:"relative",width:"180px","min-height":"180px","border-radius":"10px",margin:"1em 1em",padding:"0.5em","text-align":"center","box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)"}},[t("i",{staticClass:"el-icon-folder",staticStyle:{"font-size":"50px","margin-top":"5px"}}),t("div",{staticStyle:{"word-wrap":"break-word"}},[e._v(e._s(s.name))]),t("div",{staticStyle:{position:"absolute",left:"0",bottom:"10px",width:"100%",display:"flex","justify-content":"space-evenly"}},[t("a",{attrs:{href:s.file,download:s.name,target:"_blank"}},[t("el-button",{staticStyle:{"font-size":"25px","background-color":"transparent"},attrs:{slot:"reference",icon:"el-icon-download"},slot:"reference"})],1),2!==e.user.roleId?t("button",{staticClass:"delButton",on:{click:function(t){return e.fileDel(s.file)}}},[t("svg",{staticClass:"svgIcon",attrs:{viewBox:"0 0 448 512"}},[t("path",{attrs:{d:"M135.2 17.7L128 32H32C14.3 32 0 46.3 0 64S14.3 96 32 96H416c17.7 0 32-14.3 32-32s-14.3-32-32-32H320l-7.2-14.3C307.4 6.8 296.3 0 284.2 0H163.8c-12.1 0-23.2 6.8-28.6 17.7zM416 128H32L53.2 467c1.6 25.3 22.6 45 47.9 45H346.9c25.3 0 46.3-19.7 47.9-45L416 128z"}})])]):e._e()])])})),0)]):e._e(),t("el-divider",[t("i",{staticClass:"el-icon-upload2"}),e._v(" 上 传 公 开 文 件")]),t("div",{staticClass:"upBox"},[t("el-upload",{attrs:{action:`${this.postUrl}/files/PublicUp`,"on-change":e.handleChange,multiple:"",drag:""}},[t("i",{staticClass:"el-icon-upload"}),t("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),t("em",[e._v("点击上传")])])])],1)],1)],1)],1)},l=[],a={name:"Header",data(){return{postUrl:this.$httpUrl,sizeGB:0,sizeT:0,sizeFull:!1,isMobile:!1,tab:"my",customColors:[{color:"#0c9600",percentage:20},{color:"#005b00",percentage:40},{color:"#984747",percentage:60},{color:"#bd3434",percentage:80},{color:"#ce0000",percentage:100}],user:JSON.parse(sessionStorage.getItem("CurUser")),FileList:[],publicFile:[]}},methods:{fileGet(){this.$axios.get(this.$httpUrl+"/files/list?userId="+this.user.id).then((e=>e.data)).then((e=>{200===e.code?(console.log(e.data),this.FileList=e.data.list,this.sizeGB=e.data.size,this.publicFile=e.data.publicList,this.sizeT=this.sizeGB/.05>100?100:this.sizeGB/.05,this.sizeGB/.05>=100&&(this.sizeFull=!0)):this.$message({showClose:!0,message:"文件加载失败..",type:"error"})}))},fileDel(e){this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.$axios.get(this.$httpUrl+"/files/del?file="+e).then((e=>e.data)).then((e=>{200===e.code?(this.fileGet(),this.$message({showClose:!0,message:"删除成功",type:"success"})):this.$message({showClose:!0,message:"删除失败",type:"error"})}))})).catch((()=>{}))},handleChange(e,t){console.log(t),e.response&&200===e.response.code?(this.$message({showClose:!0,message:"上传成功",type:"success"}),this.fileGet()):e.response&&400===e.response.code&&this.$message({showClose:!0,message:"文件上传失败，请稍后再试",type:"error"})},checkIfMobile(){this.isMobile=window.innerWidth<800},format(e){return e>=100?"满":`${e.toFixed(0)}%`}},created(){this.fileGet()},mounted(){this.checkIfMobile(),window.addEventListener("resize",this.checkIfMobile)}},o=a,r=s(1001),n=(0,r.Z)(o,i,l,!1,null,"1428f905",null),c=n.exports}}]);
//# sourceMappingURL=176.20b87bb2.js.map